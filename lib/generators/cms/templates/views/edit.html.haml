%h2 Edit <%= @name.human.downcase %>

= form_for @<%= @name.element %>, url: cms_<%= @name.element %>_path(@<%= @name.element %>), html: {class: 'form-horizontal'} do |f|
<% @type.attributes.each do |attribute| -%>
  .control-group
    = f.label :<%= attribute.field_name %>, class: 'control-label'
<% if attribute.orderable? -%>
    .controls
      = f.<%= attribute.form_type %> :<%= attribute.name %>, 1.upto(CMS::<%= @name %>.count).to_a
<% elsif attribute.reference? -%>
    .controls
      = f.<%= attribute.form_type %> :<%= attribute.field_name %>, CMS::<%= attribute.reference_to %>.all.collect {|r| [ r.<%= attribute.options['reference_label'] %>, r.id ] }
<% else -%>
    .controls
      = f.<%= attribute.form_type %> :<%= attribute.name %>
<% end -%>
<% end -%>
  .form-actions
    = f.submit 'Save', class: 'btn btn-primary', :'data-disable-with' => 'Saving...'
